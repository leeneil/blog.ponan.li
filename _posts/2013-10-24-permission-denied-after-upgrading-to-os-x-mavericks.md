---
layout: post
title: "第一次升級 Mavericks 就崩潰：沒有權限開啟 home 目錄"
date: 2013-10-24 17:11
comments: true
categories: [SSD, mac, OS X, Mavericks, OS X 10.9, dropbox, unix]
---
去年的這個時候在同事的勸敗之下，跑去買了 SSD ，然後我選擇直接在新買的 SSD 上面灌新的 OSX ，灌好之後把使用者資料夾重新 mount 回舊的那顆硬碟的 `home` 資料夾，然後把`home`之外所有東西全部刪掉。詳細的做法我寫在舊的部落格：

* [Mac Book Pro 完全無痛轉換SSD](http://lipon.blogspot.tw/2012/11/mac-book-pro-ssd.html "Mac Book Pro 完全無痛轉換SSD -- 晴空北緯25° ") --晴空北緯25°

這次 Mavericks 免費更新，眼看鄉民一片好評，我卻還在觀望，因為印象中每次升級 OS X 都遇到奇怪的事情，這次看到大家這挺，最後看到有人強調 **升級之後 Aperture 神快** 此時我終於被說服惹，回家之後立馬來下載。

下載是有點慢，安裝則是大約花了40分鐘左右去跑，然後......

**居然要設定用戶資料，包括帳號和密碼**

這...... 不對啊，大大！不是說是升級嗎 ＝=？

等到帳號設定好之後，進入桌面，我最擔心的事情發生了...... 雖然我帳號密碼都設和以前一樣，但是我還是走進了一張全新的桌面，就像一台全新的電腦一樣。

此時我還有恃無恐，因為還有一招還沒用！
<!--more-->
![螢幕快照 2013-10-25 上午1.33.32.png](/assets/img/2013/Fj2FkP1ZQQG4HVCxj8TG_%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202013-10-25%20%E4%B8%8A%E5%8D%881.33.32.png)
嗯，照理來說，接下來就是重新把使用者的 `home` 目錄指定回我放在另外一顆硬碟的老地方，重新開機，應該就可以了....... 吧？

殊不知，重新開機後才是悲劇的開始，因為什麼事情都沒發生！趕快打開 finder 來看，才發現我的使用者資料夾下面的 `Desktop`、`Downloads`那些全部都 **沒有開啟的權限** ，這下慘了！ 明明同一個帳號，同一個密碼，但是就是不給開！感覺相同場景我以前也在 Windows 上遇過啊，真的是各種無奈......。

此時我立馬打開終端機，結果當然也是一樣啦： **Permission denied** ， GG。所幸我很快就想到了，應該可以用`chown`來解？ 於是我就下了

    chown -R myusername /Volumes/Macintosh HD/Users/myusername/
    
殊不知，直接噴出更多 **Permission denied** 。花了5秒，想到下一招，但是這招如果沒用，我就真的要哭了。這次改成

    sudo chown -R myusername /Volumes/Macintosh HD/Users/myusername/

and it works! 太好惹，此時我的桌面開始回復了，但是這時候最重要的事情，應該是要馬上重開機！


是的，各位觀眾，重開機之後，我的電腦又跟以前一樣啦！ 目前唯一發現的問題是， Yahoo! 輸入法不見了，但是其他都正常！

# 後記
1. 剛才問當初一起研究怎麼升級 SSD 的同事，問他升級 Mavericks 了沒？本來想阻止他的，殊不知他早就升級好了，更神奇的是， **他什麼逆境都沒遇到！** 傑克這真是太神奇了，當時我也是幫他用一樣的方法，把`home`目錄指回舊硬碟啊，可是他居然沒事......
2. 這次 Dropbox 無痛轉換，不用重裝也不用重新同步，喔耶！
3. 懂一點 UNIX 的知識真的是很有幫助的...
4. 所以說到底，正確的順序應該是先做完 `chown` 再回去改使用者資料夾設定，這樣重開機完就一次ok。